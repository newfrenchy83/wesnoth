

# These abilities replace the dummy abilities used before wesnoth 1.16 version
# and utilisation of latent weapon specials
#define ABILITY_BERSERK_TEACHING
    [berserk]
        id=berserk_teaching
        name= _ "radiating insanity"
        female_name= _ "female^radiating insanity"
        description= _ "All nearby allies fight with a bloodlust equal to the dwarvish berserk."
        value=30
        [filter_student]
            [filter_weapon]
                range=melee
            [/filter_weapon]
        [/filter_student]
        cumulative=no
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/berserk]
#enddef

#define ABILITY_CHARGE_TEACHING
    [damage]
        id=charge_teaching
        name= _ "warlord's rule"
        female_name= _ "female^warlord's rule"
        description= _ "All nearby allies deal and take 50% more damage."
        special_note=_" This unit can fanaticise all units adjacent to him into a frenzy, making them deal and take double damage, but only offensively."
        [filter_student]
            [filter_weapon]
                range=melee
            [/filter_weapon]
        [/filter_student]
        active_on=offense
        multiply=1.5
        cumulative=no
        affect_self=no
        affect_allies=yes
        apply_to=both
        [affect_adjacent]
        [/affect_adjacent]
    [/damage]
#enddef

#define ABILITY_POISON_TEACHING
    [poison]
        id=poison_teaching
        name= _ "radiation"
        female_name= _ "female^radiation"
        description= _ "All nearby allies get poisonous attacks."
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/poison]
#enddef

#define ABILITY_FIRSTSTRIKE_TEACHING
    [firststrike]
        id=firststrike_teaching
        name= _ "zeal aura"
        female_name= _ "female^zeal aura"
        description= _ "All nearby allies get firststrike."
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/firststrike]
#enddef

#define ABILITY_BACKSTAB_TEACHING
    [damage]
        id=backstab_teaching
        name= _ "murderous presence"
        female_name= _ "female^murderous presence"
        description= _ "All nearby allies get melee backstab."
        multiply=2
        cumulative=no
        active_on=offense
        affect_self=no
        affect_allies=yes
        [filter_student]
            [filter_weapon]
                range=melee
                [not]
                    special_id_active=backstab
                [/not]
            [/filter_weapon]
        [/filter_student]
        [filter_opponent]
            formula="
                enemy_of(self, flanker) and not flanker.petrified
            where
                flanker = unit_at(direction_from(loc, other.facing))
            "
        [/filter_opponent]
        [affect_adjacent]
        [/affect_adjacent]
    [/damage]
#enddef

#define ABILITY_MARKSMAN_TEACHING
    [chance_to_hit]
        id=marksman_teaching
        name= _ "cantor"
        female_name= _ "female^cantor"
        description= _ "This unit grants marksman to all ranged attacks of all adjacent allies."
        value=60
        cumulative=yes
        active_on=offense
        [filter_student]
            [filter_weapon]
                range=ranged
            [/filter_weapon]
        [/filter_student]
        affect_self=yes
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/chance_to_hit]
#enddef

#define ABILITY_MAGICAL_TEACHING
    [chance_to_hit]
        id=magical_teaching
        name= _ "cantor"
        female_name= _ "female^cantor"
        description= _ "This unit grants marksman to all ranged attacks of all adjacent allies."
        value=70
        cumulative=no
        [filter_student]
            [filter_weapon]
                range=ranged
            [/filter_weapon]
        [/filter_student]
        overwrite_specials=one_side
        [overwrite]
            [experimental_filter_specials]
                value=0-100
                cumulative=yes
            [/experimental_filter_specials]
        [/overwrite]
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/chance_to_hit]
#enddef

#define ABILITY_DRAIN_TEACHING
    [drains]
        id=drain_teaching
        name= _ "aura of hunger"
        female_name= _ "female^aura of hunger"
        description= _ "All adjacent allies gain melee drain that drains 25% of the damage dealt (instead of the usual 50%)."
        value=25
        cumulative=no
        [filter_student]
            [filter_weapon]
                range=melee
            [/filter_weapon]
        [/filter_student]
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/drains]
#enddef
